(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06e07b4a"],{"03ec":function(t,e,a){t.exports=a.p+"view_admin/img/mobilehead.1c931282.png"},"2d50":function(t,e,a){"use strict";var r=a("bb0b"),n=a.n(r);n.a},b562:function(t,e,a){"use strict";a.d(e,"i",(function(){return n})),a.d(e,"g",(function(){return i})),a.d(e,"h",(function(){return s})),a.d(e,"j",(function(){return u})),a.d(e,"s",(function(){return c})),a.d(e,"a",(function(){return o})),a.d(e,"r",(function(){return l})),a.d(e,"m",(function(){return d})),a.d(e,"n",(function(){return p})),a.d(e,"w",(function(){return h})),a.d(e,"f",(function(){return m})),a.d(e,"c",(function(){return f})),a.d(e,"d",(function(){return g})),a.d(e,"e",(function(){return b})),a.d(e,"t",(function(){return v})),a.d(e,"v",(function(){return w})),a.d(e,"u",(function(){return k})),a.d(e,"A",(function(){return V})),a.d(e,"k",(function(){return y})),a.d(e,"b",(function(){return C})),a.d(e,"z",(function(){return x})),a.d(e,"x",(function(){return I})),a.d(e,"y",(function(){return M})),a.d(e,"q",(function(){return O})),a.d(e,"o",(function(){return _})),a.d(e,"p",(function(){return j})),a.d(e,"l",(function(){return T}));var r=a("b6bd");function n(t){return Object(r["a"])({url:"app/routine",method:"get",params:t})}function i(){return Object(r["a"])({url:"app/routine/create",method:"get"})}function s(t){return Object(r["a"])({url:"app/routine/".concat(t,"/edit"),method:"get"})}function u(t){return Object(r["a"])({url:"app/routine/set_status/".concat(t.id,"/").concat(t.status),method:"PUT"})}function c(t){return Object(r["a"])({url:"app/wechat/menu",method:"get"})}function o(t){return Object(r["a"])({url:"app/wechat/menu",method:"post",data:t})}function l(t){return Object(r["a"])({url:"app/wechat/template",method:"get",params:t})}function d(){return Object(r["a"])({url:"app/wechat/template/create",method:"get"})}function p(t){return Object(r["a"])({url:"app/wechat/template/".concat(t,"/edit"),method:"get"})}function h(t){return Object(r["a"])({url:"app/wechat/template/set_status/".concat(t.id,"/").concat(t.status),method:"PUT"})}function m(t){return Object(r["a"])({url:t.url,method:"post",data:t.key})}function f(t){return Object(r["a"])({url:"app/wechat/keyword",method:"get",params:t})}function g(t){return Object(r["a"])({url:"app/wechat/keyword/set_status/".concat(t.id,"/").concat(t.status),method:"PUT"})}function b(t,e){return Object(r["a"])({url:t,method:"get",params:e.key})}function v(t){return Object(r["a"])({url:"/app/wechat/news",method:"POST",data:t})}function w(t){return Object(r["a"])({url:"app/wechat/news",method:"GET",params:t})}function k(t){return Object(r["a"])({url:"app/wechat/news/".concat(t),method:"GET"})}function V(t){return Object(r["a"])({url:"app/wechat/user",method:"GET",params:t})}function y(){return Object(r["a"])({url:"app/wechat/user/tag_group",method:"GET"})}function C(t){return Object(r["a"])({url:t,method:"GET"})}function x(){return Object(r["a"])({url:"app/wechat/tag",method:"GET"})}function I(){return Object(r["a"])({url:"app/wechat/tag/create",method:"GET"})}function M(t){return Object(r["a"])({url:"app/wechat/tag/".concat(t,"/edit"),method:"GET"})}function O(){return Object(r["a"])({url:"app/wechat/group",method:"GET"})}function _(){return Object(r["a"])({url:"app/wechat/group/create",method:"GET"})}function j(t){return Object(r["a"])({url:"app/wechat/group/".concat(t,"/edit"),method:"GET"})}function T(t){return Object(r["a"])({url:"app/wechat/action",method:"GET",params:t})}},bb0b:function(t,e,a){},c861:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article-manager"},[r("div",{staticClass:"i-layout-page-header"},[r("PageHeader",{attrs:{title:t.$route.meta.title,"hidden-breadcrumb":""}})],1),r("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[r("Row",{attrs:{gutter:24,type:"flex"}},[r("Col",{staticClass:"ml40",attrs:{span:"24"}},[r("Col",{attrs:{span:24}},[r("Col",{staticClass:"left mb15",attrs:{xl:7,lg:7,md:22,sm:22,xs:22}},[r("img",{staticClass:"top",attrs:{src:a("03ec")}}),r("img",{staticClass:"bottom",attrs:{src:"http://cdn.oss.9gt.net/images/mobilefoot.png"}}),r("div",{staticStyle:{background:"#F4F5F9","min-height":"438px",position:"absolute",top:"63px",width:"320px"}}),r("div",{staticClass:"textbot"},[t._l(t.list,(function(e,a){return r("div",{key:a,staticClass:"li",class:{active:e===t.formValidate}},[r("div",[r("div",{staticClass:"add",on:{click:function(r){return t.add(e,a)}}},[r("Icon",{attrs:{type:"ios-add"}}),r("div",{staticClass:"arrow"})],1),r("div",{staticClass:"tianjia"},t._l(e.sub_button,(function(e,n){return r("div",{key:n,staticClass:"addadd",class:{active:e===t.formValidate},on:{click:function(r){return t.gettem(e,n,a)}}},[t._v(t._s(e.name||"二级菜单"))])})),0)]),r("div",{staticClass:"text",on:{click:function(r){return t.gettem(e,a,null)}}},[t._v(t._s(e.name||"一级菜单"))])])})),r("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length<3,expression:"list.length < 3"}],staticClass:"li"},[r("div",{staticClass:"text",on:{click:t.addtext}},[r("Icon",{attrs:{type:"ios-add"}})],1)])],2)]),r("Col",{attrs:{xl:11,lg:12,md:22,sm:22,xs:22}},[null!==t.checkedMenuId?r("Tabs",{attrs:{value:"name1"}},[r("TabPane",{attrs:{label:"菜单信息",name:"name1"}},[r("Col",{staticClass:"userAlert",attrs:{span:"24"}},[r("div",{staticClass:"box-card right"},[r("Alert",{staticClass:"spwidth",attrs:{"show-icon":"",closable:""}},[t._v(" 已添加子菜单，仅可设置菜单名称")]),r("Form",{ref:"formValidate",staticClass:"mt20",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[r("FormItem",{attrs:{label:"菜单名称",prop:"name"}},[r("Input",{staticClass:"spwidth",attrs:{placeholder:"请填写菜单名称"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),r("FormItem",{attrs:{label:"规则状态",prop:"type"}},[r("Select",{staticClass:"spwidth",attrs:{placeholder:"请选择规则状态"},model:{value:t.formValidate.type,callback:function(e){t.$set(t.formValidate,"type",e)},expression:"formValidate.type"}},[r("Option",{attrs:{value:"click"}},[t._v("关键字")]),r("Option",{attrs:{value:"view"}},[t._v("跳转网页")]),r("Option",{attrs:{value:"miniprogram"}},[t._v("小程序")])],1)],1),"click"===t.formValidate.type?r("div",[r("FormItem",{attrs:{label:"关键字",prop:"key"}},[r("Input",{staticClass:"spwidth",attrs:{placeholder:"请填写关键字"},model:{value:t.formValidate.key,callback:function(e){t.$set(t.formValidate,"key",e)},expression:"formValidate.key"}})],1)],1):t._e(),"miniprogram"===t.formValidate.type?r("div",[r("FormItem",{attrs:{label:"appid",prop:"appid"}},[r("Input",{staticClass:"spwidth",attrs:{placeholder:"请填写appid"},model:{value:t.formValidate.appid,callback:function(e){t.$set(t.formValidate,"appid",e)},expression:"formValidate.appid"}})],1),r("FormItem",{attrs:{label:"备用网页",prop:"pagepath"}},[r("Input",{staticClass:"spwidth",attrs:{placeholder:"请填写备用网页"},model:{value:t.formValidate.pagepath,callback:function(e){t.$set(t.formValidate,"pagepath",e)},expression:"formValidate.pagepath"}})],1),r("FormItem",{attrs:{label:"小程序路径",prop:"url"}},[r("Input",{staticClass:"spwidth",attrs:{placeholder:"请填写小程序路径"},model:{value:t.formValidate.url,callback:function(e){t.$set(t.formValidate,"url",e)},expression:"formValidate.url"}})],1)],1):t._e(),"view"===t.formValidate.type?r("div",[r("FormItem",{attrs:{label:"跳转地址",prop:"url"}},[r("Input",{staticClass:"spwidth",attrs:{placeholder:"请填写跳转地址"},model:{value:t.formValidate.url,callback:function(e){t.$set(t.formValidate,"url",e)},expression:"formValidate.url"}})],1)],1):t._e()],1)],1)])],1),r("Button",{attrs:{slot:"extra",size:"small",type:"error"},on:{click:t.deltMenus},slot:"extra"},[t._v("删除")])],1):t._e(),t.isTrue?r("Col",{attrs:{span:24}},[r("Button",{staticStyle:{display:"block",margin:"10px auto"},attrs:{type:"primary"},on:{click:function(e){return t.submenus("formValidate")}}},[t._v("保存并发布")])],1):t._e()],1)],1)],1)],1)],1),r("Modal",{attrs:{width:"360"},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[r("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[r("Icon",{attrs:{type:"ios-information-circle"}}),r("span",[t._v("删除")])],1),r("div",{staticStyle:{"text-align":"center"}},[r("p",[t._v("确定删除吗？")])]),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"error",size:"large",long:""},on:{click:t.del}},[t._v("确定")])],1)])],1)},n=[],i=a("a34a"),s=a.n(i),u=a("b562");function c(t,e,a,r,n,i,s){try{var u=t[i](s),c=u.value}catch(o){return void a(o)}u.done?e(c):Promise.resolve(c).then(r,n)}function o(t){return function(){var e=this,a=arguments;return new Promise((function(r,n){var i=t.apply(e,a);function s(t){c(i,r,n,s,u,"next",t)}function u(t){c(i,r,n,s,u,"throw",t)}s(void 0)}))}}var l={name:"wechatMenus",data:function(){return{modal2:!1,formValidate:{name:"",type:"click",appid:"",url:"",key:"",pagepath:"",id:0},ruleValidate:{name:[{required:!0,message:"请填写菜单名称",trigger:"blur"},{min:1,max:14,message:"长度在 1 到 14 个字符",trigger:"blur"}],key:[{required:!0,message:"请填写关键字",trigger:"blur"}],appid:[{required:!0,message:"请填写appid",trigger:"blur"}],pagepath:[{required:!0,message:"请填写备用网页",trigger:"blur"}],url:[{required:!0,message:"请填写跳转地址",trigger:"blur"}],type:[{required:!0,message:"请选择规则状态",trigger:"change"}]},parentMenuId:null,list:[],checkedMenuId:null,isTrue:!1}},mounted:function(){if(this.getMenus(),!this.list.length)return this.formValidate;this.formValidate=this.list[this.activeClass]},methods:{defaultMenusData:function(){return{type:"click",name:"",sub_button:[]}},defaultChildData:function(){return{type:"click",name:""}},getMenus:function(){var t=this;Object(u["s"])().then(function(){var e=o(s.a.mark((function e(a){var r;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=a.data,t.list=r.menus;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},submenus:function(t){var e=this;this.isTrue&&!this.checkedMenuId&&0!==this.checkedMenuId?this.putData():this.$refs[t].validate((function(t){if(t)e.putData();else if(!e.check())return!1}))},putData:function(){var t=this,e={button:this.list};Object(u["a"])(e).then(function(){var e=o(s.a.mark((function e(a){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$Message.success(a.msg),t.checkedMenuId=null,t.formValidate={},t.isTrue=!1;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},gettem:function(t,e,a){this.checkedMenuId=e,this.formValidate=t,this.parentMenuId=a,this.isTrue=!0},add:function(t,e){if(!this.check())return!1;if(t.sub_button.length<5){var a=this.defaultChildData(),r=t.sub_button.length;t.sub_button.push(a),this.formValidate=a,this.checkedMenuId=r,this.parentMenuId=e,this.isTrue=!0}},addtext:function(){if(console.log(this.list),!this.check())return!1;var t=this.defaultMenusData(),e=this.list.length;this.list.push(t),this.formValidate=t,this.checkedMenuId=e,this.parentMenuId=null,this.isTrue=!0},check:function(){var t=/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?/;return null===this.checkedMenuId||(!this.isTrue||(this.formValidate.name?"click"!==this.formValidate.type||this.formValidate.key?"view"!==this.formValidate.type||t.test(this.formValidate.url)?!!("miniprogram"!==this.formValidate.type||this.formValidate.appid&&this.formValidate.pagepath&&this.formValidate.url)||(this.$Message.warning("请填写完整小程序配置!"),!1):(this.$Message.warning("请输入正确的跳转地址!"),!1):(this.$Message.warning("请输入关键字!"),!1):(this.$Message.warning("请输入按钮名称!"),!1)))},deltMenus:function(){this.isTrue?this.modal2=!0:this.$Message.warning("请选择菜单!")},del:function(){null===this.parentMenuId?this.list.splice(this.checkedMenuId,1):this.list[this.parentMenuId].sub_button.splice(this.checkedMenuId,1),this.parentMenuId=null,this.formValidate={name:"",type:"click",appid:"",url:"",key:"",pagepath:"",id:0},this.isTrue=!0,this.modal2=!1,this.checkedMenuId=null,this.$refs["formValidate"].resetFields()}}},d=l,p=(a("2d50"),a("2877")),h=Object(p["a"])(d,r,n,!1,null,"5043b7a9",null);e["default"]=h.exports}}]);