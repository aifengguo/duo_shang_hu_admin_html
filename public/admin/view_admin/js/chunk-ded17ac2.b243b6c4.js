(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ded17ac2","chunk-3693c920"],{3701:function(t,e,r){},"5e6f":function(t,e,r){"use strict";var a=r("ca83"),i=r.n(a);i.a},b7be:function(t,e,r){"use strict";r.d(e,"l",(function(){return i})),r.d(e,"j",(function(){return n})),r.d(e,"k",(function(){return o})),r.d(e,"m",(function(){return c})),r.d(e,"t",(function(){return s})),r.d(e,"u",(function(){return u})),r.d(e,"s",(function(){return l})),r.d(e,"E",(function(){return d})),r.d(e,"c",(function(){return m})),r.d(e,"b",(function(){return p})),r.d(e,"a",(function(){return f})),r.d(e,"d",(function(){return g})),r.d(e,"g",(function(){return h})),r.d(e,"h",(function(){return b})),r.d(e,"A",(function(){return v})),r.d(e,"f",(function(){return _})),r.d(e,"e",(function(){return w})),r.d(e,"i",(function(){return y})),r.d(e,"q",(function(){return O})),r.d(e,"x",(function(){return k})),r.d(e,"w",(function(){return x})),r.d(e,"v",(function(){return C})),r.d(e,"y",(function(){return j})),r.d(e,"o",(function(){return V})),r.d(e,"p",(function(){return P})),r.d(e,"z",(function(){return I})),r.d(e,"r",(function(){return $})),r.d(e,"n",(function(){return D})),r.d(e,"F",(function(){return S})),r.d(e,"D",(function(){return T})),r.d(e,"B",(function(){return E})),r.d(e,"C",(function(){return q}));var a=r("b6bd");function i(t){return Object(a["a"])({url:"marketing/coupon/list",method:"get",params:t})}function n(t){return Object(a["a"])({url:"marketing/coupon/create/".concat(t),method:"get"})}function o(t){return Object(a["a"])({url:"marketing/coupon/".concat(t,"/edit"),method:"get"})}function c(t){return Object(a["a"])({url:"marketing/coupon/issue/".concat(t),method:"get"})}function s(t){return Object(a["a"])({url:"marketing/coupon/released",method:"get",params:t})}function u(t){return Object(a["a"])({url:"marketing/coupon/released/issue_log/".concat(t),method:"get"})}function l(t){return Object(a["a"])({url:"marketing/coupon/released/".concat(t,"/status"),method:"get"})}function d(t){return Object(a["a"])({url:"/marketing/coupon/user",method:"get",params:t})}function m(t){return Object(a["a"])({url:"marketing/bargain",method:"get",params:t})}function p(t){return Object(a["a"])({url:"marketing/bargain/".concat(t),method:"get"})}function f(t){return Object(a["a"])({url:"marketing/bargain/".concat(t.id),method:"POST",data:t})}function g(t){return Object(a["a"])({url:"marketing/bargain/set_status/".concat(t.id,"/").concat(t.status),method:"PUT"})}function h(t){return Object(a["a"])({url:"marketing/combination",method:"get",params:t})}function b(t){return Object(a["a"])({url:"marketing/combination/set_status/".concat(t.id,"/").concat(t.status),method:"PUT"})}function v(){return Object(a["a"])({url:"marketing/combination/statistics",method:"GET"})}function _(t){return Object(a["a"])({url:"marketing/combination/".concat(t),method:"get"})}function w(t){return Object(a["a"])({url:"marketing/combination/".concat(t.id),method:"POST",data:t})}function y(t){return Object(a["a"])({url:"marketing/combination/combine/list",method:"GET",params:t})}function O(t){return Object(a["a"])({url:"marketing/combination/order_pink/".concat(t),method:"GET"})}function k(t){return Object(a["a"])({url:"marketing/seckill",method:"GET",params:t})}function x(t){return Object(a["a"])({url:"marketing/seckill/".concat(t),method:"GET"})}function C(t){return Object(a["a"])({url:"marketing/seckill/".concat(t.id),method:"post",data:t})}function j(t){return Object(a["a"])({url:"marketing/seckill/set_status/".concat(t.id,"/").concat(t.status),method:"put"})}function V(t){return Object(a["a"])({url:"marketing/integral",method:"GET",params:t})}function P(t){return Object(a["a"])({url:"marketing/integral/statistics",method:"GET",params:t})}function I(){return Object(a["a"])({url:"marketing/seckill/time_list",method:"GET"})}function $(t,e){return Object(a["a"])({url:"product/product/attrs/".concat(t,"/").concat(e),method:"GET"})}function D(t){return Object(a["a"])({url:"marketing/coupon/released/".concat(t),method:"DELETE"})}function S(t){return Object(a["a"])({url:"export/userPoint",method:"get",params:t})}function T(t){return Object(a["a"])({url:"export/storeBargain",method:"get",params:t})}function E(t){return Object(a["a"])({url:"export/storeCombination",method:"get",params:t})}function q(t){return Object(a["a"])({url:"export/storeSeckill",method:"get",params:t})}},b982:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"i-layout-page-header"},[r("PageHeader",{staticClass:"product_tabs",attrs:{"hidden-breadcrumb":""}},[r("div",{staticClass:"ivu-mt ivu-mb",attrs:{slot:"title"},slot:"title"},[r("router-link",{attrs:{to:{path:"/admin/marketing/store_bargain/index"}}},[r("Button",{staticClass:"mr20",attrs:{icon:"ios-arrow-back",size:"small"}},[t._v("返回")])],1),r("span",{staticClass:"mr20",domProps:{textContent:t._s("0"!==t.$route.params.id?"编辑砍价商品":"添加砍价商品")}})],1)])],1),r("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[r("Row",{staticClass:"mt30 acea-row row-middle row-center",attrs:{type:"flex"}},[r("Col",{attrs:{span:"20"}},[r("Steps",{attrs:{current:t.current}},[r("Step",{attrs:{title:"选择砍价商品"}}),r("Step",{attrs:{title:"填写基础信息"}}),r("Step",{attrs:{title:"修改商品详情"}})],1)],1),r("Col",{attrs:{span:"23"}},[r("Form",{ref:"formValidate",staticClass:"form mt30",attrs:{rules:t.ruleValidate,model:t.formValidate,"label-width":t.labelWidth,"label-position":t.labelPosition},on:{"on-validate":t.validate},nativeOn:{submit:function(t){t.preventDefault()}}},[r("FormItem",{directives:[{name:"show",rawName:"v-show",value:0===t.current,expression:"current === 0"}],attrs:{label:"选择商品：",prop:"image_input"}},[r("div",{staticClass:"picBox",on:{click:t.changeGoods}},[t.formValidate.image?r("div",{staticClass:"pictrue"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.formValidate.image,expression:"formValidate.image"}]})]):r("div",{staticClass:"upLoad acea-row row-center-wrapper"},[r("Icon",{staticClass:"iconfont",attrs:{type:"ios-camera-outline",size:"26"}})],1)])]),r("Row",{directives:[{name:"show",rawName:"v-show",value:1===t.current,expression:"current === 1"}],attrs:{type:"flex"}},[r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"商品主图：",prop:"image"}},[r("div",{staticClass:"picBox",on:{click:function(e){return t.modalPicTap("dan","danFrom")}}},[t.formValidate.image?r("div",{staticClass:"pictrue"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.formValidate.image,expression:"formValidate.image"}]})]):r("div",{staticClass:"upLoad acea-row row-center-wrapper"},[r("Icon",{staticClass:"iconfont",attrs:{type:"ios-camera-outline",size:"26"}})],1)])])],1),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"商品轮播图：",prop:"images"}},[r("div",{staticClass:"acea-row"},[t._l(t.formValidate.images,(function(e,a){return r("div",{key:a,staticClass:"pictrue",attrs:{draggable:"true"},on:{dragstart:function(r){return t.handleDragStart(r,e)},dragover:function(r){return r.preventDefault(),t.handleDragOver(r,e)},dragenter:function(r){return t.handleDragEnter(r,e)},dragend:function(r){return t.handleDragEnd(r,e)}}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"item"}]}),r("Button",{staticClass:"btndel",attrs:{shape:"circle",icon:"md-close"},nativeOn:{click:function(e){return t.handleRemove(a)}}})],1)})),r("div",{staticClass:"upLoad acea-row row-center-wrapper",on:{click:function(e){return t.modalPicTap("duo")}}},[r("Icon",{staticClass:"iconfont",attrs:{type:"ios-camera-outline",size:"26"}})],1)],2)])],1),r("Col",{attrs:{span:"24"}},[r("Col",t._b({},"Col",t.grid,!1),[r("FormItem",{attrs:{label:"砍价活动名称：",prop:"title","label-for":"title"}},[r("Input",{attrs:{placeholder:"请输入砍价活动名称","element-id":"title"},model:{value:t.formValidate.title,callback:function(e){t.$set(t.formValidate,"title",e)},expression:"formValidate.title"}})],1)],1)],1),r("Col",{attrs:{span:"24"}},[r("Col",t._b({},"Col",t.grid,!1),[r("FormItem",{attrs:{label:"砍价活动简介：",prop:"info","label-for":"info"}},[r("Input",{attrs:{placeholder:"请输入砍价活动简介",type:"textarea",rows:4,"element-id":"info"},model:{value:t.formValidate.info,callback:function(e){t.$set(t.formValidate,"info",e)},expression:"formValidate.info"}})],1)],1)],1),r("Col",t._b({},"Col",t.grid2,!1),[r("FormItem",{attrs:{label:"活动时间：",prop:"section_time"}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"请选择活动时间",value:t.formValidate.section_time},on:{"on-change":t.onchangeTime},model:{value:t.formValidate.section_time,callback:function(e){t.$set(t.formValidate,"section_time",e)},expression:"formValidate.section_time"}})],1)],1),r("Col",t._b({},"Col",t.grid2,!1),[r("FormItem",{attrs:{label:"单位：",prop:"unit_name","label-for":"unit_name"}},[r("Input",{attrs:{placeholder:"请输入单位","element-id":"unit_name"},model:{value:t.formValidate.unit_name,callback:function(e){t.$set(t.formValidate,"unit_name",e)},expression:"formValidate.unit_name"}})],1)],1),r("Col",t._b({},"Col",t.grid2,!1),[r("FormItem",{attrs:{label:"单次砍价最大金额：",prop:"bargain_max_price"}},[r("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:"请输单次砍价最大金额",min:0,"element-id":"bargain_max_price"},model:{value:t.formValidate.bargain_max_price,callback:function(e){t.$set(t.formValidate,"bargain_max_price",e)},expression:"formValidate.bargain_max_price"}})],1)],1),r("Col",t._b({},"Col",t.grid2,!1),[r("FormItem",{attrs:{label:"单次砍价最小金额：",prop:"bargain_min_price","label-for":"bargain_min_price"}},[r("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入单次砍价最小金额",min:0,"element-id":"bargain_min_price"},model:{value:t.formValidate.bargain_min_price,callback:function(e){t.$set(t.formValidate,"bargain_min_price",e)},expression:"formValidate.bargain_min_price"}})],1)],1),r("Col",t._b({},"Col",t.grid2,!1),[r("FormItem",{attrs:{label:"排序："}},[r("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入排序","element-id":"sort",precision:0},model:{value:t.formValidate.sort,callback:function(e){t.$set(t.formValidate,"sort",e)},expression:"formValidate.sort"}})],1)],1),r("Col",t._b({},"Col",t.grid2,!1),[r("FormItem",{attrs:{label:"赠送积分："}},[r("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入赠送积分","element-id":"give_integral",precision:0},model:{value:t.formValidate.give_integral,callback:function(e){t.$set(t.formValidate,"give_integral",e)},expression:"formValidate.give_integral"}})],1)],1),r("Col",t._b({},"Col",t.grid2,!1),[r("FormItem",{attrs:{label:"运费模板：",prop:"temp_id"}},[r("div",[r("Select",{model:{value:t.formValidate.temp_id,callback:function(e){t.$set(t.formValidate,"temp_id",e)},expression:"formValidate.temp_id"}},t._l(t.templateList,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)])],1),r("Col",t._b({},"Col",t.grid2,!1),[r("FormItem",{attrs:{label:"热门推荐：",props:"is_hot","label-for":"is_hot"}},[r("RadioGroup",{attrs:{"element-id":"is_hot"},model:{value:t.formValidate.is_hot,callback:function(e){t.$set(t.formValidate,"is_hot",e)},expression:"formValidate.is_hot"}},[r("Radio",{staticClass:"radio",attrs:{label:1}},[t._v("开启")]),r("Radio",{attrs:{label:0}},[t._v("关闭")])],1)],1)],1),r("Col",t._b({},"Col",t.grid2,!1),[r("FormItem",{attrs:{label:"活动状态：",props:"status","label-for":"status"}},[r("RadioGroup",{attrs:{"element-id":"status"},model:{value:t.formValidate.status,callback:function(e){t.$set(t.formValidate,"status",e)},expression:"formValidate.status"}},[r("Radio",{staticClass:"radio",attrs:{label:1}},[t._v("开启")]),r("Radio",{attrs:{label:0}},[t._v("关闭")])],1)],1)],1),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"规格选择："}},[r("Table",{attrs:{data:t.specsData,columns:t.columns,border:""},scopedSlots:t._u([{key:"pic",fn:function(e){e.row;var a=e.index;return[r("div",{staticClass:"acea-row row-middle row-center-wrapper",on:{click:function(e){return t.modalPicTap("dan","danTable",a)}}},[t.specsData[a].pic?r("div",{staticClass:"pictrue pictrueTab"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.specsData[a].pic,expression:"specsData[index].pic"}]})]):r("div",{staticClass:"upLoad pictrueTab acea-row row-center-wrapper"},[r("Icon",{staticClass:"iconfont",attrs:{type:"ios-camera-outline",size:"21"}})],1)])]}},{key:"price",fn:function(e){e.row;var a=e.index;return[r("InputNumber",{staticClass:"priceBox",attrs:{min:0,"active-change":""},model:{value:t.specsData[a].price,callback:function(e){t.$set(t.specsData[a],"price",e)},expression:"specsData[index].price"}})]}},{key:"min_price",fn:function(e){e.row;var a=e.index;return[r("InputNumber",{staticClass:"priceBox",attrs:{min:0,"active-change":""},model:{value:t.specsData[a].min_price,callback:function(e){t.$set(t.specsData[a],"min_price",e)},expression:"specsData[index].min_price"}})]}},{key:"quota",fn:function(e){e.row;var a=e.index;return[r("InputNumber",{staticClass:"priceBox",attrs:{min:0,"active-change":""},model:{value:t.specsData[a].quota,callback:function(e){t.$set(t.specsData[a],"quota",e)},expression:"specsData[index].quota"}})]}}])})],1)],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:2===t.current,expression:"current === 2"}]},[r("FormItem",{attrs:{label:"内容："}},[r("vue-ueditor-wrap",{key:1,staticStyle:{width:"90%"},attrs:{config:t.myConfig},on:{beforeInit:t.addCustomDialog},model:{value:t.formValidate.description,callback:function(e){t.$set(t.formValidate,"description",e)},expression:"formValidate.description"}})],1),r("FormItem",{attrs:{label:"规则："}},[r("vue-ueditor-wrap",{key:2,staticStyle:{width:"90%"},attrs:{config:t.myConfig},on:{beforeInit:t.addCustomDialog},model:{value:t.formValidate.rule,callback:function(e){t.$set(t.formValidate,"rule",e)},expression:"formValidate.rule"}})],1)],1),r("FormItem",[r("Button",{directives:[{name:"show",rawName:"v-show",value:0!==t.current,expression:"current!==0"}],staticClass:"submission mr15",attrs:{disabled:t.$route.params.id&&"0"!==t.$route.params.id&&1===t.current},on:{click:t.step}},[t._v("上一步")]),r("Button",{staticClass:"submission",attrs:{type:"primary"},domProps:{textContent:t._s(2===t.current?"提交":"下一步")},on:{click:function(e){return t.next("formValidate")}}})],1),t.spinShow?r("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1)],1)],1),r("Modal",{staticClass:"paymentFooter",attrs:{title:"商品列表",footerHide:"",scrollable:"",width:"900"},on:{"on-cancel":t.cancel},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[r("goods-list",{ref:"goodslist",on:{getProductId:t.getProductId}})],1),r("Modal",{attrs:{width:"60%",scrollable:"","footer-hide":"",closable:"",title:"上传商品图","mask-closable":!1,"z-index":1},model:{value:t.modalPic,callback:function(e){t.modalPic=e},expression:"modalPic"}},[t.modalPic?r("uploadPictures",{attrs:{isChoice:t.isChoice,gridBtn:t.gridBtn,gridPic:t.gridPic},on:{getPic:t.getPic,getPicD:t.getPicD}}):t._e()],1)],1)},i=[],n=r("a34a"),o=r.n(n),c=r("2f62"),s=r("c4ad"),u=r("b0e7"),l=r("b7be"),d=r("c4c8"),m=r("6625"),p=r.n(m);function f(t,e,r,a,i,n,o){try{var c=t[n](o),s=c.value}catch(u){return void r(u)}c.done?e(s):Promise.resolve(s).then(a,i)}function g(t){return function(){var e=this,r=arguments;return new Promise((function(a,i){var n=t.apply(e,r);function o(t){f(n,a,i,o,c,"next",t)}function c(t){f(n,a,i,o,c,"throw",t)}o(void 0)}))}}function h(t){return _(t)||v(t)||b()}function b(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function v(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(r,!0).forEach((function(e){O(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var k={name:"storeBargainCreate",components:{goodsList:s["default"],uploadPictures:u["a"],VueUeditorWrap:p.a},data:function(){return{spinShow:!1,myConfig:{autoHeightEnabled:!1,initialFrameHeight:500,initialFrameWidth:"100%",UEDITOR_HOME_URL:"/admin/UEditor/",serverUrl:""},isChoice:"",current:0,modalPic:!1,grid:{xl:12,lg:20,md:24,sm:24,xs:24},grid2:{xl:8,lg:8,md:12,sm:24,xs:24},gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},modals:!1,modal_loading:!1,images:[],templateList:[],columns:[],specsData:[],formValidate:{images:[],info:"",title:"",store_name:"",image:"",unit_name:"",price:0,min_price:0,bargain_max_price:10,bargain_min_price:.01,cost:0,bargain_num:1,stock:1,sales:0,sort:0,num:0,give_integral:0,postage:0,is_postage:0,is_hot:0,status:0,section_time:[],description:"",rule:"",id:0,product_id:0,temp_id:"",attrs:[],items:[]},ruleValidate:{image:[{required:!0,message:"请选择主图",trigger:"change"}],images:[{required:!0,type:"array",message:"请选择主图",trigger:"change"},{type:"array",min:1,message:"Choose two hobbies at best",trigger:"change"}],title:[{required:!0,message:"请输入砍价活动名称",trigger:"blur"}],info:[{required:!0,message:"请输入砍价活动简介",trigger:"blur"}],store_name:[{required:!0,message:"请输入砍价商品名称",trigger:"blur"}],section_time:[{required:!0,type:"array",message:"请选择活动时间",trigger:"change"}],unit_name:[{required:!0,message:"请输入单位",trigger:"blur"}],price:[{required:!0,type:"number",message:"请输入原价",trigger:"blur"}],min_price:[{required:!0,type:"number",message:"请输入最低购买价",trigger:"blur"}],bargain_max_price:[{required:!0,type:"number",message:"请输单次砍价最大金额",trigger:"blur"}],bargain_min_price:[{required:!0,type:"number",message:"单次砍价最小金额",trigger:"blur"}],cost:[{required:!0,type:"number",message:"请输入成本价",trigger:"blur"}],bargain_num:[{required:!0,type:"number",message:"请输入单次砍价次数",trigger:"blur"}],stock:[{required:!0,type:"number",message:"请输入库存",trigger:"blur"}],num:[{required:!0,type:"number",message:"请输入单次允许购买数量",trigger:"blur"}],temp_id:[{required:!0,message:"请选择运费模板",trigger:"change",type:"number"}]},currentid:"",picTit:"",tableIndex:0}},computed:y({},Object(c["e"])("admin/layout",["isMobile"]),{labelWidth:function(){return this.isMobile?void 0:140},labelPosition:function(){return this.isMobile?"top":"right"}}),mounted:function(){"0"!==this.$route.params.id&&this.$route.params.id&&(this.current=1,this.getInfo()),this.productGetTemplate()},methods:{productAttrs:function(t){var e=this,r=this;Object(l["r"])(t.id,2).then((function(t){var a=t.data.info,i={title:"选择",key:"chose",width:60,align:"center",render:function(t,r){var a=r.index,i=!1;i=e.currentid===a;var n=e;return t("div",[t("Radio",{props:{value:i},on:{"on-change":function(){n.currentid=a;var t=[];t.push(r.row),n.formValidate.attrs=t}}})])}};r.columns=a.header,r.columns.unshift(i),r.specsData=a.attrs,r.formValidate.items=a.items})).catch((function(t){r.$Message.error(t.msg)}))},productGetTemplate:function(){var t=this;Object(d["o"])().then((function(e){t.templateList=e.data}))},getProductId:function(t){var e=this;this.modal_loading=!1,this.modals=!1,setTimeout((function(){e.formValidate={images:t.slider_image,info:t.store_info,title:t.store_name,store_name:t.store_name,image:t.image,unit_name:t.unit_name,price:0,min_price:0,bargain_max_price:10,bargain_min_price:.01,cost:t.cost,bargain_num:1,stock:t.stock,sales:t.sales,sort:t.sort,num:0,give_integral:t.give_integral,postage:t.postage,is_postage:t.is_postage,is_hot:t.is_hot,status:0,section_time:[],description:t.description,rule:"",id:0,product_id:t.id,temp_id:t.temp_id},e.productAttrs(t)}),500)},cancel:function(){this.modals=!1},handleDragStart:function(t,e){this.dragging=e},handleDragEnd:function(t,e){this.dragging=null},handleDragOver:function(t){t.dataTransfer.dropEffect="move"},handleDragEnter:function(t,e){if(t.dataTransfer.effectAllowed="move",e!==this.dragging){var r=h(this.formValidate.images),a=r.indexOf(this.dragging),i=r.indexOf(e);r.splice.apply(r,[i,0].concat(h(r.splice(a,1)))),this.formValidate.images=r}},onchangeTime:function(t){this.formValidate.section_time=t},getInfo:function(){var t=this;this.spinShow=!0,Object(l["b"])(this.$route.params.id).then(function(){var e=g(o.a.mark((function e(r){var a,i,n,c;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,i=r.data.info,t.formValidate=i,t.formValidate.rule=null===i.rule?"":i.rule,t.$set(t.formValidate,"items",i.attrs.items),t.columns=i.attrs.header,n={title:"选择",key:"chose",width:60,align:"center",render:function(e,r){var a=r.index,i=!1;i=t.currentid===a;var n=t;return e("div",[e("Radio",{props:{value:i},on:{"on-change":function(){n.currentid=a;var t=[];t.push(r.row),n.formValidate.attrs=t}}})])}},a.columns.unshift(n),t.specsData=i.attrs.value,c=[],i.attrs.value.forEach((function(t,e){t.opt&&(c.push(t),a.$set(a,"currentid",e),a.$set(a.formValidate,"attrs",c))})),t.spinShow=!1;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.spinShow=!1,t.$Message.error(e.msg)}))},next:function(t){var e=this;2===this.current?this.$refs[t].validate((function(t){if(!t)return!1;if(""===e.currentid)return e.$Message.error("请选择属性规格");var r=e.specsData[e.currentid],a=e.formValidate.attrs[0];if(a.price=r.price,a.min_price=r.min_price,a.quota=r.quota,e.formValidate.attrs[0].quota<=0)return e.$Message.error("砍价限量必须大于0");e.formValidate.id=e.$route.params.id||0,Object(l["a"])(e.formValidate).then(function(){var t=g(o.a.mark((function t(r){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$Message.success(r.msg),setTimeout((function(){e.$router.push({path:"/admin/marketing/store_bargain/index"})}),500);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))})):this.formValidate.image?this.current+=1:this.$Message.warning("请选择商品")},step:function(){this.current--},getContent:function(t){this.formValidate.description=t},getRole:function(t){this.formValidate.rule=t},modalPicTap:function(t,e,r){this.modalPic=!0,this.isChoice="dan"===t?"单选":"多选",this.picTit=e,this.tableIndex=r},getPic:function(t){switch(this.picTit){case"danFrom":this.formValidate.image=t.att_dir;break;default:this.specsData[this.tableIndex].pic=t.att_dir,this.formValidate.attrs[0].pic=t.att_dir}this.modalPic=!1},getPicD:function(t){var e=this;this.images=t,this.images.map((function(t){e.formValidate.images.push(t.att_dir)})),this.modalPic=!1},handleRemove:function(t){this.images.splice(t,1),this.formValidate.images.splice(t,1),console.log(this.images)},changeGoods:function(){this.modals=!0,this.$refs.goodslist.getList(),this.$refs.goodslist.goodsCategory()},validate:function(t,e,r){!1===e&&this.$Message.error(r)},addCustomDialog:function(t){window.UE.registerUI("test-dialog",(function(t,e){var r=new window.UE.ui.Dialog({iframeUrl:"/admin/widget.images/index.html?fodder=dialog",editor:t,name:e,title:"上传图片",cssRules:"width:1200px;height:500px;padding:20px;"});this.dialog=r;var a=new window.UE.ui.Button({name:"dialog-button",title:"上传图片",cssRules:"background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;",onclick:function(){r.render(),r.open()}});return a}),37)}}},x=k,C=(r("5e6f"),r("2877")),j=Object(C["a"])(x,a,i,!1,null,"1c8eee26",null);e["default"]=j.exports},c4ad:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"goodList"},[r("Form",{ref:"formValidate",staticClass:"tabform",attrs:{model:t.formValidate,"label-width":t.labelWidth,"label-position":t.labelPosition}},[r("Row",{attrs:{type:"flex",gutter:24}},[r("Col",t._b({},"Col",t.grid,!1),[r("FormItem",{attrs:{label:"商品分类：","label-for":"pid"}},[r("Select",{staticStyle:{width:"200px"},attrs:{clearable:""},on:{"on-change":t.userSearchs},model:{value:t.formValidate.cate_id,callback:function(e){t.$set(t.formValidate,"cate_id",e)},expression:"formValidate.cate_id"}},t._l(t.treeSelect,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.html+e.cate_name)+"\n                        ")])})),1)],1)],1),r("Col",t._b({},"Col",t.grid,!1),[r("FormItem",{attrs:{label:"商品搜索：","label-for":"store_name"}},[r("Input",{staticStyle:{width:"80%"},attrs:{search:"","enter-button":"",placeholder:"请输入商品名称,关键字,编号"},on:{"on-search":t.userSearchs},model:{value:t.formValidate.store_name,callback:function(e){t.$set(t.formValidate,"store_name",e)},expression:"formValidate.store_name"}})],1)],1)],1)],1),r("Table",{ref:"table",attrs:{"no-data-text":"暂无数据","no-filtered-data-text":"暂无筛选结果","max-height":"400",columns:t.columns4,data:t.tableList,loading:t.loading},on:{"on-selection-change":t.changeCheckbox},scopedSlots:t._u([{key:"image",fn:function(t){var e=t.row;t.index;return[r("viewer",[r("div",{staticClass:"tabBox_img"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image,expression:"row.image"}]})])])]}}])}),r("div",{staticClass:"acea-row row-right page"},[r("Page",{attrs:{total:t.total,"show-elevator":"","show-total":"","page-size":t.formValidate.limit},on:{"on-change":t.pageChange}})],1),"many"===t.many?r("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary",size:"large",loading:t.modal_loading,long:""},on:{click:t.ok}},[t._v("提交")])],1):t._e()],1)},i=[],n=r("a34a"),o=r.n(n),c=r("2f62"),s=r("c4c8");function u(t,e,r,a,i,n,o){try{var c=t[n](o),s=c.value}catch(u){return void r(u)}c.done?e(s):Promise.resolve(s).then(a,i)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(a,i){var n=t.apply(e,r);function o(t){u(n,a,i,o,c,"next",t)}function c(t){u(n,a,i,o,c,"throw",t)}o(void 0)}))}}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(r,!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f={name:"index",data:function(){return{modal_loading:!1,treeSelect:[],formValidate:{page:1,limit:15,cate_id:"",store_name:""},total:0,modals:!1,loading:!1,grid:{xl:10,lg:10,md:12,sm:24,xs:24},tableList:[],currentid:0,productRow:{},columns4:[{title:"商品ID",key:"id"},{title:"图片",slot:"image"},{title:"商品名称",key:"store_name",minWidth:250},{title:"商品分类",key:"cate_name",minWidth:150}],images:[],many:""}},computed:m({},Object(c["e"])("admin/layout",["isMobile"]),{labelWidth:function(){return this.isMobile?void 0:120},labelPosition:function(){return this.isMobile?"top":"right"}}),created:function(){var t=this,e={width:60,align:"center",render:function(e,r){var a=r.row.id,i=!1;i=t.currentid===a;var n=t;return e("div",[e("Radio",{props:{value:i},on:{"on-change":function(){if(n.currentid=a,t.productRow=r.row,t.$emit("getProductId",t.productRow),t.productRow.id){if("image"===t.$route.query.fodder){var e={image:t.productRow.image,product_id:t.productRow.id};form_create_helper.set("image",e),form_create_helper.close("image")}}else t.$Message.warning("请先选择商品")}}})])}},r={type:"selection",width:60,align:"center"},a=this.$route.query.type;this.many=a,"many"===a?this.columns4.unshift(r):this.columns4.unshift(e)},mounted:function(){this.goodsCategory(),this.getList()},methods:{changeCheckbox:function(t){var e=[];t.forEach((function(t){var r={image:t.image,product_id:t.id};e.push(r)})),this.images=e},goodsCategory:function(){var t=this;Object(s["z"])().then((function(e){t.treeSelect=e.data})).catch((function(e){t.$Message.error(e.msg)}))},pageChange:function(t){this.formValidate.page=t,this.getList()},getList:function(){var t=this;this.loading=!0,Object(s["b"])(this.formValidate).then(function(){var e=l(o.a.mark((function e(r){var a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=r.data,t.tableList=a.list,t.total=r.data.count,t.loading=!1;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))},ok:function(){this.images.length>0?"image"===this.$route.query.fodder&&(console.log("this.images"),console.log(this.images),form_create_helper.set("image",this.images),form_create_helper.close("image")):this.$Message.warning("请先选择商品")},userSearchs:function(){this.getList()},clear:function(){this.productRow.id="",this.currentid=""}}},g=f,h=(r("e471"),r("2877")),b=Object(h["a"])(g,a,i,!1,null,"52c2389e",null);e["default"]=b.exports},c4c8:function(t,e,r){"use strict";r.d(e,"h",(function(){return i})),r.d(e,"i",(function(){return n})),r.d(e,"a",(function(){return o})),r.d(e,"r",(function(){return c})),r.d(e,"z",(function(){return s})),r.d(e,"p",(function(){return u})),r.d(e,"j",(function(){return l})),r.d(e,"q",(function(){return d})),r.d(e,"k",(function(){return m})),r.d(e,"l",(function(){return p})),r.d(e,"x",(function(){return f})),r.d(e,"b",(function(){return g})),r.d(e,"s",(function(){return h})),r.d(e,"w",(function(){return b})),r.d(e,"d",(function(){return v})),r.d(e,"e",(function(){return _})),r.d(e,"g",(function(){return w})),r.d(e,"v",(function(){return y})),r.d(e,"t",(function(){return O})),r.d(e,"u",(function(){return k})),r.d(e,"f",(function(){return x})),r.d(e,"m",(function(){return C})),r.d(e,"o",(function(){return j})),r.d(e,"n",(function(){return V})),r.d(e,"y",(function(){return P})),r.d(e,"c",(function(){return I}));var a=r("b6bd");function i(){return Object(a["a"])({url:"product/product/type_header",method:"get"})}function n(t){return Object(a["a"])({url:"product/product",method:"get",params:t})}function o(t,e){return Object(a["a"])({url:"product/product/set_show/".concat(t,"/").concat(e),method:"put"})}function c(t){return Object(a["a"])({url:"product/product/product_show",method:"put",data:t})}function s(){return Object(a["a"])({url:"product/category/tree/1",method:"get"})}function u(t){return Object(a["a"])({url:"product/product/".concat(t),method:"get"})}function l(t){return Object(a["a"])({url:"product/product/".concat(t.id),method:"POST",data:t})}function d(t){return Object(a["a"])({url:"product/category",method:"get",params:t})}function m(){return Object(a["a"])({url:"product/category/create",method:"get"})}function p(t){return Object(a["a"])({url:"product/category/".concat(t,"/edit"),method:"get"})}function f(t){return Object(a["a"])({url:"product/category/set_show/".concat(t.id,"/").concat(t.is_show),method:"PUT"})}function g(t){return Object(a["a"])({url:"product/product/list",method:"GET",params:t})}function h(t){return Object(a["a"])({url:"product/reply",method:"get",params:t})}function b(t,e){return Object(a["a"])({url:"product/reply/set_reply/".concat(e),method:"PUT",data:t})}function v(t){return Object(a["a"])({url:"product/crawl",method:"POST",data:t})}function _(t){return Object(a["a"])({url:"product/crawl/save",method:"POST",data:t})}function w(t,e){return Object(a["a"])({url:"product/generate_attr/".concat(e),method:"POST",data:t})}function y(t){return Object(a["a"])({url:"product/product/rule",method:"GET",params:t})}function O(t,e){return Object(a["a"])({url:"product/product/rule/".concat(e),method:"POST",data:t})}function k(t){return Object(a["a"])({url:"product/product/rule/".concat(t),method:"get"})}function x(t){return Object(a["a"])({url:"product/reply/fictitious_reply/".concat(t),method:"get"})}function C(){return Object(a["a"])({url:"product/product/get_rule",method:"get"})}function j(){return Object(a["a"])({url:"product/product/get_template",method:"get"})}function V(){return Object(a["a"])({url:"product/product/get_temp_keys",method:"get"})}function P(t){return Object(a["a"])({url:"export/storeProduct",method:"get",params:t})}function I(t){return Object(a["a"])({url:"product/product/check_activity/".concat(t),method:"get"})}},ca83:function(t,e,r){},e471:function(t,e,r){"use strict";var a=r("3701"),i=r.n(a);i.a}}]);